<!DOCTYPE html>
<html>

<head>
  <title>HowManySwimmers Running Check</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 0 20px;
      line-height: 1.6;
    }

    .button {
      display: inline-block;
      padding: 10px 20px;
      background: #0066cc;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      margin-top: 20px;
    }

    .button:hover {
      background: #0052a3;
    }

    .warning {
      padding: 15px;
      background: #fff3cd;
      border: 1px solid #ffeeba;
      border-radius: 4px;
      color: #856404;
      margin: 20px 0;
    }

    #status {
      margin: 20px 0;
    }
  </style>
</head>

<body>
  <h1>HowManySwimmers Availability Check</h1>
  <div>
    <p>
      Welcome. üåäüèä‚Äç‚ôÇÔ∏èüèä‚Äç‚ôÄÔ∏è
    </p>
    <p>
      HowManySwimmers is a web app that <a href="https://cadams.com/making-howmanyswimmers/" target="_blank"
        rel="noopener noreferrer">counts Salties swimmers using face recognition</a>. The intense computational
      requirement makes it challenging (expensive!) to run on the Internet.
    </p>
    <p>
      So it runs on Chris Adams' laptop (that's me!), just when it's needed. Being a laptop, it might not be running
      right now! Eg. the laptop is off, internet is down...
    </p>
    <p>
      So this page does a check if it's running, and then lets you head over. If it says it's down, you can still try
      ü§∑‚Äç‚ôÇÔ∏è but actually, you should ask Chris to put it up so you can use it.
    </p>
    <p>
      For questions contact Chris Adams on Whatsapp.
    </p>
    <p>
      Check status:
    </p>
  </div>
  <div id="status">Checking if HowManySwimmers is up and running...</div>
  <div id="content"></div>

  <script>
    const targetUrl = 'https://macbookpro.myth-minor.ts.net';

    async function checkWebsite() {
      const statusDiv = document.getElementById('status');
      const contentDiv = document.getElementById('content');

      contentDiv.innerHTML = `
          <a href="${targetUrl}" target="_blank" rel="noopener noreferrer" class="button">
              Visit HowManySwimmers (the check is still running...) ‚Üó
          </a>
      `;

      try {
        const response = await fetch(targetUrl, { mode: 'no-cors' });
        // Site appears to be up
        statusDiv.textContent = 'The website appears to be up and running!';
        contentDiv.innerHTML = `
                    <a href="${targetUrl}" target="_blank" rel="noopener noreferrer" class="button">
                        Visit HowManySwimmers (it's working!) ‚Üó
                    </a>
                `;
      } catch (error) {
        // Site might be down
        statusDiv.textContent = '';
        contentDiv.innerHTML = `
                    <div class="warning">
                        The website appears to be down at the moment. You can still try visiting it, 
                        but you may encounter issues. If problems persist, please contact Chris Adams on Whatsapp.
                    </div>
                    <a href="${targetUrl}" target="_blank" rel="noopener noreferrer" class="button">
                        Try Visiting HowManySwimmers Anyway ‚Üó
                    </a>
                    <p><small>Contact Chris on Whatsapp to ask him to fix his laptop!</small></p>
                `;
      }
    }

    // Run the check when page loads
    checkWebsite();
  </script>
</body>

</html>